<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>VR Lab Room</title>

    <!-- A-FRAME CHUẨN (KHÔNG LỖI) -->
    <script src="https://cdn.jsdelivr.net/npm/aframe@1.5.0/dist/aframe.min.js"></script>

    <!-- Physics -->
    <script src="https://cdn.jsdelivr.net/npm/aframe-physics-system@4.0.1/dist/aframe-physics-system.min.js"></script>

    <!-- Extras -->
    <script src="https://cdn.jsdelivr.net/npm/aframe-extras@6.1.1/dist/aframe-extras.min.js"></script>

    <!-- Fix loader + click events -->
    <script>
      AFRAME.registerComponent("click-to-scale", {
        init: function () {
          this.el.addEventListener("click", () => {
            this.el.setAttribute("scale", "1.2 1.2 1.2");
          });
        }
      });
    </script>

    <style>
      body { margin: 0; overflow: hidden; }
      #loading {
        position: fixed;
        top: 0; left: 0; right: 0; bottom: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        background: #000;
        color: #fff;
        font-size: 24px;
        z-index: 9999;
      }
    </style>
  </head>

  <body>
    <div id="loading">Đang tải mô hình...</div>

    <a-scene physics="gravity: -9.8" renderer="antialias: true" loading-screen="enabled:false">

      <!-- Load model -->
      <a-assets>
        <a-asset-item id="labModel" src="hoasinh.gltf"></a-asset-item>
      </a-assets>

      <!-- Add model -->
      <a-entity id="modelRoot"
        gltf-model="#labModel"
        position="0 0 0"
        scale="1 1 1"
        click-to-scale
        shadow="cast: true; receive: true">
      </a-entity>

      <!-- Camera + VR controllers -->
      <a-entity position="0 1.6 3">
        <a-camera wasd-controls-enabled="true"></a-camera>

        <!-- VR Controllers -->
        <a-entity laser-controls="hand: left"></a-entity>
        <a-entity laser-controls="hand: right"></a-entity>
      </a-entity>

      <!-- Lights -->
      <a-entity light="type: directional; intensity: 1" position="1 1 1"></a-entity>
      <a-entity light="type: ambient; intensity: 0.5"></a-entity>

      <!-- Floor -->
      <a-plane static-body rotation="-90 0 0" width="20" height="20" color="#e5e5e5"></a-plane>
    </a-scene>

    <script>
      // Tắt loading khi mô hình load xong
      document.querySelector("#labModel").addEventListener("loaded", () => {
        document.getElementById("loading").style.display = "none";
      });
    </script>
  </body>
</html>
